import os ;

if [ os.name ] = NT
{
	local ffmpeg_prefix = "c:/usr/local/ffmpeg" ;
	local ffmpeg_version1 = "52" ;
	local ffmpeg_version2 = "49" ;
	local swscale_version = "0" ;

	lib avcodec
	 	:
		:
		  <file>"$(ffmpeg_prefix)/lib/avcodec-$(ffmpeg_version1).lib"
		  <file>"$(ffmpeg_prefix)/bin/avcodec-$(ffmpeg_version1).dll"
		:
		: <include>"$(ffmpeg_prefix)/include"
		  <toolset>msvc:<include>"$(ffmpeg_prefix)/include-msvc"
		;
	lib avdevice
	 	:
		:
		  <file>"$(ffmpeg_prefix)/lib/avdevice-$(ffmpeg_version1).lib"
		  <file>"$(ffmpeg_prefix)/bin/avdevice-$(ffmpeg_version1).dll"
		:
		: <include>"$(ffmpeg_prefix)/include"
		  <toolset>msvc:<include>"$(ffmpeg_prefix)/include-msvc"
		;
	lib avformat
	 	:
		:
		  <file>"$(ffmpeg_prefix)/lib/avformat-$(ffmpeg_version1).lib"
		  <file>"$(ffmpeg_prefix)/bin/avformat-$(ffmpeg_version1).dll"
		:
		: <include>"$(ffmpeg_prefix)/include"
		  <toolset>msvc:<include>"$(ffmpeg_prefix)/include-msvc"
		;
	lib avutil
	 	:
		:
		  <file>"$(ffmpeg_prefix)/lib/avutil-$(ffmpeg_version2).lib"
		  <file>"$(ffmpeg_prefix)/bin/avutil-$(ffmpeg_version2).dll"
		:
		: <include>"$(ffmpeg_prefix)/include"
		  <toolset>msvc:<include>"$(ffmpeg_prefix)/include-msvc"
		;
	lib swscale
	 	:
		:
		  <file>"$(ffmpeg_prefix)/lib/swscale-$(swscale_version).lib"
		  <file>"$(ffmpeg_prefix)/bin/swscale-$(swscale_version).dll"
		:
		: <include>"$(ffmpeg_prefix)/include"
		  <toolset>msvc:<include>"$(ffmpeg_prefix)/include-msvc"
		;

	alias ffmpeg
	 	: avcodec avdevice avformat avutil swscale
		:
		:
		: 
		;

} else {

	alias ffmpeg
		: 
		: 
		:
		: <include>"`pkg-config --cflags libavformat libavdevice libavcodec libavutil libswscale`"
		  <linkflags>"`pkg-config --libs libavformat libavdevice libavcodec libavutil libswscale`"
		;
}

lib cmlib-videostream
	: [ glob src/*.cpp ] ffmpeg
	: <include>"include" <include>"$(TOP)/image/include" <include>"$(TOP)/common/include"
	:
	: <include>include <include>$(TOP)/common/include
	;	
