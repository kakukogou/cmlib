import os ;

if [ os.name ] = NT
{
	local ffmpeg_prefix = "c:/usr/local/ffmpeg" ;

	lib avcodec
	 	:
		:
		  <file>"$(ffmpeg_prefix)/lib/avcodec.lib"
		:
		: <include>"$(ffmpeg_prefix)/include"
		  <toolset>msvc:<include>"$(ffmpeg_prefix)/include-msvc"
		;
	lib avdevice
	 	:
		:
		  <file>"$(ffmpeg_prefix)/lib/avdevice.lib"
		:
		: <include>"$(ffmpeg_prefix)/include"
		  <toolset>msvc:<include>"$(ffmpeg_prefix)/include-msvc"
		;
	lib avformat
	 	:
		:
		  <file>"$(ffmpeg_prefix)/lib/avformat.lib"
		:
		: <include>"$(ffmpeg_prefix)/include"
		  <toolset>msvc:<include>"$(ffmpeg_prefix)/include-msvc"
		;
	lib avutil
	 	:
		:
		  <file>"$(ffmpeg_prefix)/lib/avutil.lib"
		:
		: <include>"$(ffmpeg_prefix)/include"
		  <toolset>msvc:<include>"$(ffmpeg_prefix)/include-msvc"
		;
	lib swscale
	 	:
		:
		  <file>"$(ffmpeg_prefix)/lib/swscale.lib"
		:
		: <include>"$(ffmpeg_prefix)/include"
		  <toolset>msvc:<include>"$(ffmpeg_prefix)/include-msvc"
		;

	alias ffmpeg
	 	: avcodec avdevice avformat avutil swscale
		:
		:
		: 
		;

} else {

	alias ffmpeg
		: 
		: 
		:
		: <include>"`pkg-config --cflags libavformat libavdevice libavcodec libavutil libswscale`"
		  <linkflags>"`pkg-config --libs libavformat libavdevice libavcodec libavutil libswscale`"
		;
}

lib cmlib-videostream
	: [ glob src/*.cpp ] ffmpeg
	: <include>"include" <include>"$(TOP)/image/include" <include>"$(TOP)/common/include"
	:
	: <include>include <include>$(TOP)/common/include
	;	
